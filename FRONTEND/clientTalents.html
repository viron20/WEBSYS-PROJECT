<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProFolio - Find Talents</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Custom CSS -->
  <link href="ProFolio.css" rel="stylesheet">
  <style>
    /* Modal scrolling fix */
    .modal-dialog {
      max-height: 90vh;
    }
    
    .modal-content {
      max-height: 90vh;
    }
    
    .modal-body {
      overflow-y: auto;
      max-height: calc(90vh - 120px); /* Adjust for header and footer */
    }
    
    /* Center portfolio modal content - FIXED STYLING */
    .portfolio-modal-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin: 0 auto;
      width: 100%;
    }
    
    .talent-profile-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      width: 100%;
    }
    
    .talent-profile-avatar {
      margin-bottom: 1rem;
    }
    
    .talent-profile-details {
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
    }
    
    .portfolio-section {
      width: 100%;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    
    #view-portfolio-skills {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
    }

    /* Fix experience items alignment */
    .experience-item {
      text-align: left;
      width: 100%;
    }
    
    /* Additional mobile styling */
    @media (max-width: 768px) {
      .modal-body {
        max-height: calc(90vh - 130px);
      }
    }

    /* ===== CRITICAL MODAL FIXES ===== */

/* Force center alignment in all modals */
#portfolioModal .modal-dialog,
#sendOfferModal .modal-dialog {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  min-height: 100vh;
  padding: 0;
}

/* Override any conflicting max-height settings */
#portfolioModal .modal-content,
#sendOfferModal .modal-content {
  width: 100%;
  max-height: none !important;
}

/* Fix portfolio modal alignment issues */
#portfolioModal .portfolio-modal-content {
  text-align: center !important;
  margin: 0 auto !important;
  padding: 0 !important;
}

/* Force center talents in portfolio modal */
#portfolioModal .talent-profile-header {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
  width: 100% !important;
  padding: 0 !important;
  margin: 0 auto 1rem auto !important;
}

#portfolioModal .talent-profile-avatar {
  margin: 0 auto 1rem auto !important;
}

#portfolioModal .talent-profile-details {
  text-align: center !important;
  padding: 0 1rem !important;
}

/* Force center Send Offer Modal content */
#sendOfferModal .send-offer-modal-content {
  width: 100% !important;
  padding: 0 1rem !important;
}

/* Ensure modal body scrolls properly */
#portfolioModal .modal-body,
#sendOfferModal .modal-body {
  overflow-y: auto;
  max-height: 75vh;
  padding: 1rem !important;
}

/* Fix skills centering */
#view-portfolio-skills {
  display: flex !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  align-items: center !important;
  gap: 0.5rem !important;
  width: 100% !important;
}

/* Fix sections not centering */
.portfolio-section {
  margin: 0 auto 1.5rem auto !important;
  width: 100% !important;
}

/* Make sure no container overflows */
#portfolioModal .row,
#sendOfferModal .row {
  margin-left: 0 !important;
  margin-right: 0 !important;
  width: 100% !important;
}

/* Simplified offer form styling */
.offer-form-simplified {
  max-width: 600px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  #portfolioModal .modal-dialog,
  #sendOfferModal .modal-dialog {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
  }
}
  </style>
</head>
<body>
  <!-- Layout Container -->
  <div class="dashboard-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <span class="logo-icon"><i class="fas fa-briefcase"></i></span>
          <span class="logo-text">Pro<span class="accent">Folio</span></span>
        </div>
      </div>
      
      <div class="sidebar-user">
        <div class="user-avatar" id="sidebar-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="user-info">
          <a href="clientProfile.html" class="user-name-link">
            <h6 class="user-name" id="sidebar-name">Aran Joshua</h6>
            <div class="user-role" id="sidebar-role">Client</div>
          </a>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="clientDashboard.html" class="nav-link">
              <i class="fas fa-th-large"></i> Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a href="clientTalents.html" class="nav-link active">
              <i class="fas fa-users"></i> Find Talents
            </a>
          </li>
          <li class="nav-item">
            <a href="clientOffers.html" class="nav-link">
              <i class="fas fa-paper-plane"></i> Sent Offers
            </a>
          </li>
        </ul>
      </nav>
      
      <div class="sidebar-footer">
        <a href="clientLogout.html" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </div>
    </aside>
    
    <main class="main-content">
      <div class="page-content">
        <!-- Page Header -->
        <header class="page-header">
          <div>
            <h2 class="page-title">Find Talents</h2>
            <p class="page-subtitle">Discover talented professionals through their portfolios</p>
          </div>
          <div class="date-display">
            <i class="far fa-calendar-alt"></i>
            <span id="current-date"></span>
          </div>
        </header>
        
        <!-- Search & Filter Section -->
        <div class="search-filter-container">
          <div class="card">
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-8">
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                    <input type="text" class="form-control" placeholder="Search for talents by name or expertise..." id="talent-search">
                  </div>
                </div>
                <div class="col-md-4">
                  <select class="form-select" id="category-filter">
                    <option value="">All Categories</option>
                    <option value="design">Design</option>
                    <option value="development">Development</option>
                    <option value="marketing">Marketing</option>
                    <option value="writing">Writing</option>
                    <option value="video">Video & Animation</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Talents Grid -->
        <div class="talents-container mt-4">
          <div class="row g-4" id="talents-grid">
            <!-- Talent cards will be dynamically inserted here by JavaScript -->
          </div>
        </div>
        
  <!-- Portfolio Modal -->
<div class="modal fade" id="portfolioModal" tabindex="-1" aria-labelledby="portfolioModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="portfolioModalLabel">Talent Portfolio</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Properly centered portfolio content -->
        <div class="portfolio-modal-content">
          <!-- Talent Profile Header -->
          <div class="talent-profile-header">
            <div class="talent-profile-avatar">
              <img src="/api/placeholder/150/150" alt="Talent" id="modal-talent-avatar">
            </div>
            <div class="talent-profile-details">
              <h4 id="modal-talent-name">Talent Name</h4>
              <p class="talent-title" id="modal-talent-title">Profession</p>
              <p class="talent-bio" id="modal-talent-bio">
                Passionate professional with extensive experience delivering high-quality solutions for clients worldwide.
              </p>
            </div>
          </div>
          
          <!-- Skills Section -->
          <div class="portfolio-section card mb-4 w-100">
            <div class="card-body">
              <h5 class="mb-3">Skills</h5>
              <div id="view-portfolio-skills">
                <!-- Skills tags will be dynamically inserted here -->
              </div>
            </div>
          </div>
          
          <!-- Work Experience Section -->
          <div class="portfolio-section card mb-4 w-100">
            <div class="card-header bg-light">
              <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Work Experience</h5>
            </div>
            <div class="card-body">
              <div id="view-portfolio-experiences">
                <!-- Work experience items will be dynamically inserted here -->
              </div>
            </div>
          </div>
          
          <!-- Work Samples Section -->
          <div class="portfolio-section card w-100">
            <div class="card-header bg-light">
              <h5 class="mb-0"><i class="fas fa-cubes me-2"></i>Work Samples</h5>
            </div>
            <div class="card-body">
              <div id="view-portfolio-samples" class="row">
                <!-- Work samples will be dynamically inserted here -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="modal-send-offer-btn">Hire Me</button>
      </div>
    </div>
  </div>
</div>

<!-- Simplified Send Offer Modal -->
<div class="modal fade" id="sendOfferModal" tabindex="-1" aria-labelledby="sendOfferModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sendOfferModalLabel">Send Offer to <span id="offer-talent-name">Talent Name</span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="send-offer-modal-content">
          <form id="offer-form" class="offer-form-simplified">
            <div class="mb-3">
              <label for="job-title" class="form-label">Job Title</label>
              <input type="text" class="form-control" id="job-title" placeholder="e.g., Senior Front-End Developer" required>
            </div>
            
            <div class="mb-4">
              <label for="client-message" class="form-label">Message to Freelancer</label>
              <textarea class="form-control" id="client-message" rows="6" placeholder="Introduce yourself and describe the job opportunity, requirements, and any other details the freelancer should know." required></textarea>
              <div class="form-text mt-2">
                <i class="fas fa-info-circle"></i> Your profile information will be automatically included with this offer.
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="submit-offer-btn">Send Offer</button>
      </div>
    </div>
  </div>
</div>
        
        <!-- Dashboard Footer -->
        <footer class="dashboard-footer">
          <p>ProFolio helps you showcase your work and connect with clients worldwide. Keep your portfolio updated to maximize opportunities.</p>
          <div class="footer-links">
            <a href="#">Terms of Service and Privacy Policy</a>
          </div>
        </footer>
      </div>
    </main>
  </div>
  
  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Client Talents JS -->
  <script src="clientTalents.js"></script>
  
<!-- Script to load profile data -->
<script>
  // Function to format the current date
  function displayCurrentDate() {
    const currentDate = new Date();
    const options = {year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('current-date').textContent = currentDate.toLocaleDateString('en-US', options);
  }

  // Load user profile data from localStorage when page loads
  document.addEventListener('DOMContentLoaded', function() {
    // Display current date
    displayCurrentDate();
    
    // Try to load user profile data
    const profileData = localStorage.getItem('profileData');
    const storedPhoto = localStorage.getItem('profilePhoto');
    
    if (profileData) {
      const userData = JSON.parse(profileData);
      
      // Update sidebar name if available
      if (userData.fullName) {
        document.getElementById('sidebar-name').textContent = userData.fullName;
      }
      
      // Update sidebar role/company if available
      if (userData.company && userData.company.trim() !== '') {
        document.getElementById('sidebar-role').textContent = userData.company;
      } else {
        document.getElementById('sidebar-role').textContent = 'Client';
      }
    }
    
    // Update avatar if a photo URL is stored
    if (storedPhoto) {
      const avatarElement = document.getElementById('sidebar-avatar');
      avatarElement.innerHTML = ''; // Clear default icon
      
      const avatarImg = document.createElement('img');
      avatarImg.src = storedPhoto;
      avatarImg.alt = 'User Avatar';
      avatarImg.style.width = '100%';
      avatarImg.style.height = '100%';
      avatarImg.style.objectFit = 'cover';
      avatarImg.style.borderRadius = '50%';
      
      avatarElement.appendChild(avatarImg);
    }
    
    // Listen for profile updates
    window.addEventListener('storage', function(event) {
      if (event.key === 'profileData' && event.newValue) {
        const updatedProfile = JSON.parse(event.newValue);
        
        // Update sidebar information
        document.getElementById('sidebar-name').textContent = updatedProfile.fullName || 'Aran Joshua';
        document.getElementById('sidebar-role').textContent = updatedProfile.company && updatedProfile.company.trim() !== '' ? 
          updatedProfile.company : 'Client';
      }
      
      if (event.key === 'profilePhoto' && event.newValue) {
        // Update avatar image
        const avatarElement = document.getElementById('sidebar-avatar');
        if (avatarElement.querySelector('img')) {
          avatarElement.querySelector('img').src = event.newValue;
        } else {
          avatarElement.innerHTML = ''; // Clear default icon
          const avatarImg = document.createElement('img');
          avatarImg.src = event.newValue;
          avatarImg.alt = 'User Avatar';
          avatarImg.style.width = '100%';
          avatarImg.style.height = '100%';
          avatarImg.style.objectFit = 'cover';
          avatarImg.style.borderRadius = '50%';
          avatarElement.appendChild(avatarImg);
        }
      }
    });
    
    // For the send offer functionality
    document.getElementById('submit-offer-btn').addEventListener('click', function() {
      // Get form values
      const jobTitle = document.getElementById('job-title').value;
      const clientMessage = document.getElementById('client-message').value;
      const talentName = document.getElementById('offer-talent-name').textContent;
      
      // Validate form
      if (!jobTitle || !clientMessage) {
        alert('Please fill out all required fields.');
        return;
      }
      
      // Get client info from localStorage
      let clientName = 'Aran Joshua'; // Default name
      let clientCompany = 'Client'; // Default role
      
      if (profileData) {
        const userData = JSON.parse(profileData);
        if (userData.fullName) {
          clientName = userData.fullName;
        }
        if (userData.company && userData.company.trim() !== '') {
          clientCompany = userData.company;
        }
      }
      
      // Create offer object that matches the structure in freelancerOffers.html
      const offerData = {
        talentName: talentName,
        clientName: clientName,
        clientCompany: clientCompany,
        jobTitle: jobTitle,
        message: clientMessage,
        date: new Date().toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})
      };
      
      // Save the offer to localStorage
      let sentOffers = JSON.parse(localStorage.getItem('sentOffers') || '[]');
      sentOffers.push(offerData);
      localStorage.setItem('sentOffers', JSON.stringify(sentOffers));
      
      // Close modal and show confirmation
      $('#sendOfferModal').modal('hide');
      alert('Your job offer has been sent to ' + talentName + '!');
      
      // Reset form
      document.getElementById('offer-form').reset();
    });
  });
</script>
</body>
</html>